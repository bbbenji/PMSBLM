<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prusa Mini Silicone Bed Leveling Mod</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mdi/font@5.8.55/css/materialdesignicons.min.css"
    />
  </head>
  <body>
    <div class="container mb-5">
      <div class="row mt-3">
        <div class="col-12 text-center">
          <h1>Absolute to relative ABL value converter & visualizer</h1>
          <!-- <h3>For use with the Prusa Mini & <a href="https://github.com/bbbenji/PMSBLM" target="_blank">Prusa Mini Silicone Bed Leveling Mod</a></h3> -->
        </div>
      </div>

      <div class="row pb-3">
        <div class="col-12 col-md-12 col-lg-10 offset-md-0 offset-lg-1">
          <h5 class="pt-3 fw-bold">Input</h5>
          <!-- <hr /> -->
          <div class="form-floating mt-2">
            <textarea
              id="source"
              name="input"
              wrap="off"
              class="form-control font-monospace"
              required
            >
  Recv:         0       1       2       3       4       5
  Recv:  5 | -0.017  -0.015  +0.080  +0.027  +0.050  +0.047
  Recv:  4 | -0.055  -0.047  +0.042  +0.060  +0.040  +0.020
  Recv:  3 | +0.010  +0.002  +0.005  +0.002  +0.030  +0.067
  Recv:  2 | -0.003  +0.014  +0.049  +0.010  +0.029  +0.047
  Recv:  1 | -0.008  +0.014  +0.054  +0.024  +0.026  +0.029
  Recv:  0 | -0.003  +0.014  +0.059  +0.037  +0.024  +0.042</textarea
            >
            <label for="input"
              >Output of <span class="font-monospace">G29</span></label
            >
          </div>

          <div class="d-grid gap-2 mt-4">
            <div class="d-flex">
              <button id="action" class="btn btn-primary w-100" type="button">
                Convert
              </button>
              <div class="form-check form-switch ms-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="invertOutput"
                />
                <label class="form-check-label text-nowrap" for="invertOutput"
                  >Invert Input</label
                >
              </div>
              <div class="form-check form-switch ms-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flipOutput"
                  checked
                />
                <label class="form-check-label text-nowrap" for="flipOutput"
                  >Flip Plot</label
                >
              </div>
            </div>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                role="switch"
                id="save"
                checked
              />
              <label class="form-check-label text-break form-inline" id="save"
                >Allow data to be saved for analytical purposes. All data is
                publicly available
                <a
                  href="https://docs.google.com/spreadsheets/d/1aT9UKHm6XbMGWDeiOef8XBGRgFBrTP9plxXJdlF43B4/edit?usp=sharing"
                  >here</a
                >.</label
              >
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 col-md-6 col-lg-5 offset-md-0 offset-lg-1">
          <h5 class="pt-3 fw-bold">Raw values</h5>
          <hr />
          <div id="raw" class="grid-container font-monospace py-3">
            <div class="backLeft" data-toggle="popover" data-placement="left">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backCenter" data-toggle="popover" data-placement="top">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backRight" data-toggle="popover" data-placement="right">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="centerLeft" data-toggle="popover" data-placement="left">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerCenter"
              data-toggle="popover"
              data-placement="top"
            >
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerRight"
              data-toggle="popover"
              data-placement="right"
            >
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontLeft" data-toggle="popover" data-placement="left">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontCenter" data-toggle="popover" data-placement="top">
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="frontRight"
              data-toggle="popover"
              data-placement="right"
            >
              ±0.00 mm <span class="mdi mdi-check text-success"></span>
            </div>
          </div>

          <h5 class="pt-3 fw-bold">Degrees</h5>
          <hr />
          <div id="degrees" class="grid-container font-monospace py-3">
            <div class="backLeft" data-toggle="popover" data-placement="left">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backCenter" data-toggle="popover" data-placement="top">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backRight" data-toggle="popover" data-placement="right">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="centerLeft" data-toggle="popover" data-placement="left">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerCenter"
              data-toggle="popover"
              data-placement="top"
            >
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerRight"
              data-toggle="popover"
              data-placement="right"
            >
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontLeft" data-toggle="popover" data-placement="left">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontCenter" data-toggle="popover" data-placement="top">
              0° <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="frontRight"
              data-toggle="popover"
              data-placement="right"
            >
              0° <span class="mdi mdi-check text-success"></span>
            </div>
          </div>

          <h5 class="pt-3 fw-bold">Fractional Turns</h5>
          <hr />
          <div id="fractions" class="grid-container font-monospace py-3">
            <div class="backLeft" data-toggle="popover" data-placement="left">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backCenter" data-toggle="popover" data-placement="top">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="backRight" data-toggle="popover" data-placement="right">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="centerLeft" data-toggle="popover" data-placement="left">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerCenter"
              data-toggle="popover"
              data-placement="top"
            >
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="centerRight"
              data-toggle="popover"
              data-placement="right"
            >
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontLeft" data-toggle="popover" data-placement="left">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div class="frontCenter" data-toggle="popover" data-placement="top">
              0 <span class="mdi mdi-check text-success"></span>
            </div>
            <div
              class="frontRight"
              data-toggle="popover"
              data-placement="right"
            >
              0 <span class="mdi mdi-check text-success"></span>
            </div>
          </div>
        </div>
        <!-- /col -->

        <div class="col-12 col-md-6 col-lg-5">
          <h5 class="pt-3 fw-bold">Stats</h5>
          <hr />
          <div id="stats" class="row">
            <div class="col-12 col-md-5">
              <dl class="row mb-0">
                <dt class="col-6">Min value:</dt>
                <dd class="col-6 font-monospace">
                  <span class="min">±0.000</span> mm
                </dd>
                <dt class="col-6">Max value:</dt>
                <dd class="col-6 font-monospace">
                  <span class="max">±0.000</span> mm
                </dd>
              </dl>
            </div>

            <div class="col-12 col-md-7">
              <dl class="row">
                <dt class="col-6 col-md-7">Max difference:</dt>
                <dd class="col-6 col-md-5 font-monospace">
                  +<span class="max_diff">0.000</span> mm
                </dd>
                <dt class="col-6 col-md-7">Average deviation:</dt>
                <dd class="col-6 col-md-5 font-monospace">
                  <span class="avg_dev">±0.000</span> mm
                </dd>
              </dl>
            </div>
          </div>

          <h5 class="fw-bold">Plot</h5>
          <hr />
          <span class="hide text-muted text-center"
            >Click "Convert" to generate plot.</span
          >
          <div id="target">
            <!-- Plotly chart will be drawn inside this DIV -->
          </div>
        </div>
        <!-- /col -->
      </div>
      <!-- /row -->
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/js/bootstrap.min.js"
      integrity="sha384-t6I8D5dJmMXjCsRLhSzCltuhNZg6P10kE0m0nAncLUjH6GeYLhRU1zfLoW3QNQDF"
      crossorigin="anonymous"
    ></script>
    <script src="script.js"></script>
    <!-- Load plotly.js into the DOM -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Load Canvas Confetti into the DOM -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-174992597-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-174992597-1");
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-TY3GMHEBYD"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-TY3GMHEBYD");
    </script>
  </body>
</html>
